---
import type { Product } from '@/types';
import { formatPrice } from '@/services/catalog';

interface Props {
  product: Product;
}

const { product } = Astro.props;
---

<article class="product-card">
  <a href={`/productos/${product.id}`} class="product-link">
    <div class="product-image">
      <img 
        src={product.imagen_url} 
        alt={product.nombre}
        loading="lazy"
        decoding="async"
        width="400"
        height="300"
      />
    </div>
    <div class="product-content">
      <h3 class="product-title">{product.nombre}</h3>
      <p class="product-description">{product.descripcion}</p>
      <div class="product-meta">
        <span class="product-category">{product.categoria}</span>
        <span class="product-line">{product.linea}</span>
      </div>
      <p class="product-price">{formatPrice(product.precio)}</p>
      <span class="btn btn-primary">Ver detalles</span>
    </div>
  </a>
</article>

<style>
  .product-card {
    background-color: var(--color-bg);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }

  .product-link {
    display: block;
  }

  .product-image {
    aspect-ratio: 4/3;
    overflow: hidden;
    background-color: var(--color-bg-alt);
  }

  .product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-normal);
  }

  .product-card:hover .product-image img {
    transform: scale(1.05);
  }

  .product-content {
    padding: var(--spacing-md);
  }

  .product-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: var(--spacing-sm);
    line-height: 1.3;
  }

  .product-description {
    font-size: var(--font-size-sm);
    color: var(--color-text-light);
    margin-bottom: var(--spacing-md);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .product-meta {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
  }

  .product-category,
  .product-line {
    font-size: 0.75rem;
    padding: var(--spacing-xs) var(--spacing-sm);
    background-color: var(--color-bg-alt);
    border-radius: var(--border-radius-sm);
    color: var(--color-text-light);
    text-transform: capitalize;
  }

  .product-price {
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--color-secondary);
    margin-bottom: var(--spacing-md);
  }

  .product-card .btn {
    width: 100%;
  }
</style>
