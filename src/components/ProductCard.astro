---
import type { Product } from '@/types';
import '@/styles/product-card.css';

interface Props {
  product: Product;
}

const { product } = Astro.props;

function formatPrice(price: number): string {
  return new Intl.NumberFormat('es-AR', {
    style: 'currency',
    currency: 'ARS',
    maximumFractionDigits: 0,
  }).format(price);
}
---

<article class="product-card">
  <a href={`/productos/${product.id}`} class="product-link">
    <div class="product-image">
      <img 
        src={product.imagen_url} 
        alt={product.nombre}
        loading="lazy"
        decoding="async"
        width="400"
        height="300"
      />
    </div>
    <div class="product-content">
      <h3 class="product-title">{product.nombre}</h3>
      <p class="product-description">{product.descripcion}</p>
      <div class="product-meta">
        <span class="product-category">{product.categoria}</span>
        <span class="product-line">{product.linea}</span>
      </div>
      <p class="product-price">{formatPrice(product.precio)}</p>
      <span class="btn btn-primary">Ver detalles</span>
    </div>
  </a>
</article>
